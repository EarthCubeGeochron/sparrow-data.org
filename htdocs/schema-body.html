<div class="sourceCode" id="cb1"><pre class="sourceCode sql"><code class="sourceCode sql"></code></pre></div>
<p>A minimal schema</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb2-1" data-line-number="1"></a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="kw">CREATE</span> <span class="kw">TABLE</span> researcher (</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">  <span class="kw">id</span> <span class="dt">integer</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">  name text <span class="kw">NOT</span> <span class="kw">NULL</span>,</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">  orcid text <span class="kw">UNIQUE</span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7">);</a>
<a class="sourceLine" id="cb2-8" data-line-number="8"></a></code></pre></div>
<p>The <code>user</code> model parallels the <code>researcher</code> model but used only for application authentication. Thus, we can reset all access by truncating this table, without losing data.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb3-1" data-line-number="1"></a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="ot">&quot;user&quot;</span> ( <span class="co">-- Name must be quoted because it collides with reserved word.</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3">  username text <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</a></code></pre></div>
<p>Stores a hashed password</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb4-1" data-line-number="1"></a>
<a class="sourceLine" id="cb4-2" data-line-number="2">  <span class="kw">password</span> text,</a>
<a class="sourceLine" id="cb4-3" data-line-number="3">  researcher_id <span class="dt">integer</span> <span class="kw">REFERENCES</span> researcher(<span class="kw">id</span>)</a>
<a class="sourceLine" id="cb4-4" data-line-number="4">);</a>
<a class="sourceLine" id="cb4-5" data-line-number="5"></a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="kw">CREATE</span> <span class="kw">TABLE</span> publication (</a>
<a class="sourceLine" id="cb4-7" data-line-number="7">  <span class="kw">id</span> serial <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</a>
<a class="sourceLine" id="cb4-8" data-line-number="8">  title text <span class="kw">NOT</span> <span class="kw">NULL</span>,</a>
<a class="sourceLine" id="cb4-9" data-line-number="9">  doi text <span class="kw">NOT</span> <span class="kw">NULL</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10">);</a>
<a class="sourceLine" id="cb4-11" data-line-number="11"></a></code></pre></div>
<p>Embargo custom data type</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb5-1" data-line-number="1"></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="kw">CREATE</span> <span class="kw">TYPE</span> embargo_status <span class="kw">AS</span> (</a>
<a class="sourceLine" id="cb5-3" data-line-number="3">  <span class="kw">permanent</span> <span class="dt">boolean</span>,</a>
<a class="sourceLine" id="cb5-4" data-line-number="4">  end_date <span class="dt">date</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5">);</a>
<a class="sourceLine" id="cb5-6" data-line-number="6"></a></code></pre></div>
<p>Vocabularies Tables to integrate units, etc. from curated collections</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb6-1" data-line-number="1"></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw">CREATE</span> <span class="kw">SCHEMA</span> vocabulary;</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="kw">CREATE</span> <span class="kw">TABLE</span> vocabulary.parameter (</a>
<a class="sourceLine" id="cb6-5" data-line-number="5">  <span class="kw">id</span> text <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">  description text,</a>
<a class="sourceLine" id="cb6-7" data-line-number="7">  authority text</a>
<a class="sourceLine" id="cb6-8" data-line-number="8">);</a>
<a class="sourceLine" id="cb6-9" data-line-number="9"></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="kw">CREATE</span> <span class="kw">TABLE</span> vocabulary.material (</a>
<a class="sourceLine" id="cb6-11" data-line-number="11">  <span class="kw">id</span> text <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</a>
<a class="sourceLine" id="cb6-12" data-line-number="12">  description text,</a>
<a class="sourceLine" id="cb6-13" data-line-number="13">  authority text,</a>
<a class="sourceLine" id="cb6-14" data-line-number="14">  type_of text <span class="kw">REFERENCES</span> vocabulary.material(<span class="kw">id</span>)</a>
<a class="sourceLine" id="cb6-15" data-line-number="15">);</a>
<a class="sourceLine" id="cb6-16" data-line-number="16"></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="kw">CREATE</span> <span class="kw">TABLE</span> vocabulary.method (</a>
<a class="sourceLine" id="cb6-18" data-line-number="18">  <span class="kw">id</span> text <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</a>
<a class="sourceLine" id="cb6-19" data-line-number="19">  description text,</a>
<a class="sourceLine" id="cb6-20" data-line-number="20">  authority text</a>
<a class="sourceLine" id="cb6-21" data-line-number="21">);</a>
<a class="sourceLine" id="cb6-22" data-line-number="22"></a>
<a class="sourceLine" id="cb6-23" data-line-number="23"></a>
<a class="sourceLine" id="cb6-24" data-line-number="24"><span class="kw">CREATE</span> <span class="kw">TABLE</span> vocabulary.unit (</a>
<a class="sourceLine" id="cb6-25" data-line-number="25">  <span class="kw">id</span> text <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</a>
<a class="sourceLine" id="cb6-26" data-line-number="26">  description text,</a>
<a class="sourceLine" id="cb6-27" data-line-number="27">  authority text</a>
<a class="sourceLine" id="cb6-28" data-line-number="28">);</a>
<a class="sourceLine" id="cb6-29" data-line-number="29"></a>
<a class="sourceLine" id="cb6-30" data-line-number="30"><span class="kw">CREATE</span> <span class="kw">TABLE</span> vocabulary.error_metric (</a>
<a class="sourceLine" id="cb6-31" data-line-number="31">  <span class="kw">id</span> text <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</a>
<a class="sourceLine" id="cb6-32" data-line-number="32">  description text,</a>
<a class="sourceLine" id="cb6-33" data-line-number="33">  authority text</a>
<a class="sourceLine" id="cb6-34" data-line-number="34">);</a>
<a class="sourceLine" id="cb6-35" data-line-number="35"></a>
<a class="sourceLine" id="cb6-36" data-line-number="36"></a>
<a class="sourceLine" id="cb6-37" data-line-number="37"><span class="co">-- Projects</span></a>
<a class="sourceLine" id="cb6-38" data-line-number="38"></a>
<a class="sourceLine" id="cb6-39" data-line-number="39"><span class="kw">CREATE</span> <span class="kw">TABLE</span> project (</a>
<a class="sourceLine" id="cb6-40" data-line-number="40">  <span class="kw">id</span> text <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</a>
<a class="sourceLine" id="cb6-41" data-line-number="41">  title text <span class="kw">NOT</span> <span class="kw">NULL</span>,</a>
<a class="sourceLine" id="cb6-42" data-line-number="42">  description text,</a>
<a class="sourceLine" id="cb6-43" data-line-number="43">  embargo embargo_status</a>
<a class="sourceLine" id="cb6-44" data-line-number="44">);</a>
<a class="sourceLine" id="cb6-45" data-line-number="45"></a>
<a class="sourceLine" id="cb6-46" data-line-number="46"><span class="kw">CREATE</span> <span class="kw">TABLE</span> project_researcher (</a>
<a class="sourceLine" id="cb6-47" data-line-number="47">  project_id text <span class="kw">REFERENCES</span> project(<span class="kw">id</span>),</a>
<a class="sourceLine" id="cb6-48" data-line-number="48">  researcher_id <span class="dt">integer</span> <span class="kw">REFERENCES</span> researcher(<span class="kw">id</span>),</a>
<a class="sourceLine" id="cb6-49" data-line-number="49">  <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (project_id, researcher_id)</a>
<a class="sourceLine" id="cb6-50" data-line-number="50">);</a>
<a class="sourceLine" id="cb6-51" data-line-number="51"></a>
<a class="sourceLine" id="cb6-52" data-line-number="52"><span class="kw">CREATE</span> <span class="kw">TABLE</span> project_publication (</a>
<a class="sourceLine" id="cb6-53" data-line-number="53">  project_id text <span class="kw">REFERENCES</span> project(<span class="kw">id</span>),</a>
<a class="sourceLine" id="cb6-54" data-line-number="54">  publication_id <span class="dt">integer</span> <span class="kw">REFERENCES</span> publication(<span class="kw">id</span>),</a>
<a class="sourceLine" id="cb6-55" data-line-number="55">  <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (project_id, publication_id)</a>
<a class="sourceLine" id="cb6-56" data-line-number="56">);</a>
<a class="sourceLine" id="cb6-57" data-line-number="57"></a></code></pre></div>
<h3 id="analytical-groups">Analytical Groups</h3>
<p>Groups of sessions for import are less universally meaningful than project-based groups. However, these can be important for internal lab processes. Examples include irradiation IDs for Ar/Ar labs, etc.</p>
<p>Right now, we only support a single measurement group for each session. This could potentially be updated to support a one-to-many relationship if desired.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb7-1" data-line-number="1"></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="kw">CREATE</span> <span class="kw">TABLE</span> measurement_group (</a>
<a class="sourceLine" id="cb7-3" data-line-number="3">  <span class="kw">id</span> text <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</a>
<a class="sourceLine" id="cb7-4" data-line-number="4">  title text <span class="kw">NOT</span> <span class="kw">NULL</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5">);</a>
<a class="sourceLine" id="cb7-6" data-line-number="6"></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">-- Descriptors for types of measurements/techniques</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="kw">CREATE</span> <span class="kw">TABLE</span> instrument (</a>
<a class="sourceLine" id="cb7-10" data-line-number="10">  <span class="kw">id</span> serial <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</a>
<a class="sourceLine" id="cb7-11" data-line-number="11">  name text <span class="kw">UNIQUE</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</a>
<a class="sourceLine" id="cb7-12" data-line-number="12">  description text</a>
<a class="sourceLine" id="cb7-13" data-line-number="13">);</a>
<a class="sourceLine" id="cb7-14" data-line-number="14"></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="kw">CREATE</span> <span class="kw">TABLE</span> datum_type (</a>
<a class="sourceLine" id="cb7-16" data-line-number="16">  <span class="kw">id</span> serial <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</a>
<a class="sourceLine" id="cb7-17" data-line-number="17">  parameter text <span class="kw">REFERENCES</span> vocabulary.parameter(<span class="kw">id</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</a>
<a class="sourceLine" id="cb7-18" data-line-number="18">  unit text <span class="kw">REFERENCES</span> vocabulary.unit(<span class="kw">id</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</a>
<a class="sourceLine" id="cb7-19" data-line-number="19">  error_unit text <span class="kw">REFERENCES</span> vocabulary.unit(<span class="kw">id</span>),</a>
<a class="sourceLine" id="cb7-20" data-line-number="20">  error_metric text <span class="kw">REFERENCES</span> vocabulary.error_metric(<span class="kw">id</span>),</a>
<a class="sourceLine" id="cb7-21" data-line-number="21">  is_computed <span class="dt">boolean</span>, <span class="co">-- Can be rebuilt from data IN THE DATABASE</span></a>
<a class="sourceLine" id="cb7-22" data-line-number="22">  is_interpreted <span class="dt">boolean</span>, <span class="co">-- Results from a data-reduction process</span></a>
<a class="sourceLine" id="cb7-23" data-line-number="23">  description text,</a>
<a class="sourceLine" id="cb7-24" data-line-number="24">  <span class="kw">UNIQUE</span> (parameter, unit, error_unit,</a>
<a class="sourceLine" id="cb7-25" data-line-number="25">          error_metric, is_computed, is_interpreted)</a>
<a class="sourceLine" id="cb7-26" data-line-number="26">);</a>
<a class="sourceLine" id="cb7-27" data-line-number="27"></a></code></pre></div>
<h2 id="sample">Sample</h2>
<p>An object to be measured</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb8-1" data-line-number="1"></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="kw">sample</span> (</a>
<a class="sourceLine" id="cb8-3" data-line-number="3">  <span class="kw">id</span> text <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</a>
<a class="sourceLine" id="cb8-4" data-line-number="4">  igsn text <span class="kw">UNIQUE</span>,</a>
<a class="sourceLine" id="cb8-5" data-line-number="5">  material text <span class="kw">REFERENCES</span> vocabulary.material(<span class="kw">id</span>),</a></code></pre></div>
<p>Order-of-magnitude precision (in meters) with which this position is known</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb9-1" data-line-number="1"></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">  location_precision <span class="dt">integer</span> <span class="kw">DEFAULT</span> <span class="dv">0</span>,</a></code></pre></div>
<p>A representative named location</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb10-1" data-line-number="1"></a>
<a class="sourceLine" id="cb10-2" data-line-number="2">  location_name text,</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">  location geometry</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">);</a></code></pre></div>
<h4 id="potential-issues">Potential issues:</h4>
<ul>
<li>Samples potentially have several levels of abstraction (e.g. different replicates or drillings from the same rock sample) (could have a self-referential ‘part_of’ relation on sample…)</li>
<li>Samples might belong to several projects</li>
</ul>
<p>Should the <code>session</code> table contain the link to project rather than the <code>sample</code> table? This might be more correct, and samples could still be linked to projects through a table relationship</p>
<h2 id="session">Session</h2>
<p>Set of analyses on the same instrument with the same technique, at the same or closely spaced in time.</p>
<h4 id="examples">Examples:</h4>
<ul>
<li>An entire Ar/Ar step heating experiment</li>
<li>A set of detrital single-crystal zircon measurements</li>
<li>A multi-grain igneous age determination</li>
</ul>
<div class="sourceCode" id="cb11"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb11-1" data-line-number="1"></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="kw">session</span> (</a>
<a class="sourceLine" id="cb11-3" data-line-number="3">  <span class="kw">id</span> serial <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</a>
<a class="sourceLine" id="cb11-4" data-line-number="4">  sample_id text <span class="kw">REFERENCES</span> <span class="kw">sample</span>(<span class="kw">id</span>),</a>
<a class="sourceLine" id="cb11-5" data-line-number="5">  project_id text <span class="kw">REFERENCES</span> project(<span class="kw">id</span>),</a>
<a class="sourceLine" id="cb11-6" data-line-number="6">  measurement_group_id text <span class="kw">REFERENCES</span> measurement_group(<span class="kw">id</span>),</a>
<a class="sourceLine" id="cb11-7" data-line-number="7">  <span class="dt">date</span> timestamptz <span class="kw">NOT</span> <span class="kw">NULL</span>,</a>
<a class="sourceLine" id="cb11-8" data-line-number="8">  end_date timestamptz,</a>
<a class="sourceLine" id="cb11-9" data-line-number="9">  instrument <span class="dt">integer</span> <span class="kw">REFERENCES</span> instrument(<span class="kw">id</span>),</a>
<a class="sourceLine" id="cb11-10" data-line-number="10">  technique text <span class="kw">REFERENCES</span> vocabulary.method(<span class="kw">id</span>),</a>
<a class="sourceLine" id="cb11-11" data-line-number="11">  target text <span class="kw">REFERENCES</span> vocabulary.material(<span class="kw">id</span>),</a>
<a class="sourceLine" id="cb11-12" data-line-number="12">  embargo embargo_status,</a>
<a class="sourceLine" id="cb11-13" data-line-number="13">  <span class="kw">UNIQUE</span> (sample_id, <span class="dt">date</span>, instrument, technique)</a>
<a class="sourceLine" id="cb11-14" data-line-number="14">);</a>
<a class="sourceLine" id="cb11-15" data-line-number="15"></a></code></pre></div>
<h2 id="analytical-constants">Analytical constants</h2>
<p>Constants, etc. used in measurements, and their relationships to individual analytical sessions, etc.</p>
<p>Right now, we support linking these parameters at the session level. Some coarser (e.g. a table for analytical process) or finer (linked parameters for each datum) abstraction might be desired.</p>
<p>In many ways, the column layout mirrors that of the datum table, with the exception that there is a many-to-many link on the data.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb12-1" data-line-number="1"></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="kw">CREATE</span> <span class="kw">TABLE</span> session_datum (</a></code></pre></div>
<p>Handles many-to-many links between session and datum, which is primarily useful for handling analytical parameters that remain constant for many sessions.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb13-1" data-line-number="1"></a>
<a class="sourceLine" id="cb13-2" data-line-number="2">  session_id <span class="dt">integer</span> <span class="kw">REFERENCES</span> <span class="kw">session</span>(<span class="kw">id</span>),</a>
<a class="sourceLine" id="cb13-3" data-line-number="3">  datum_id <span class="dt">integer</span> <span class="kw">REFERENCES</span> datum(<span class="kw">id</span>)</a>
<a class="sourceLine" id="cb13-4" data-line-number="4">);</a>
<a class="sourceLine" id="cb13-5" data-line-number="5"></a></code></pre></div>
<h2 id="single-analyses">Single analyses</h2>
<p>These two tables will end up needing data-type specific columns</p>
<h3 id="analysis"><code>analysis</code></h3>
<p>Set of data measured together at one time on one instrument</p>
<h4 id="examples-1">Examples:</h4>
<ul>
<li>A single EPMA analytical spot (different oxides measured on an EPMA are <em>data</em> in a single analysis)</li>
<li>A heating step for Ar/Ar age determination</li>
<li>A single-crystal zircon age measurement</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb14-1" data-line-number="1"></a>
<a class="sourceLine" id="cb14-2" data-line-number="2"><span class="kw">CREATE</span> <span class="kw">TABLE</span> analysis (</a>
<a class="sourceLine" id="cb14-3" data-line-number="3">  <span class="kw">id</span> serial <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</a>
<a class="sourceLine" id="cb14-4" data-line-number="4">  session_id <span class="dt">integer</span> <span class="kw">REFERENCES</span> <span class="kw">session</span>(<span class="kw">id</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</a>
<a class="sourceLine" id="cb14-5" data-line-number="5">  session_index <span class="dt">integer</span>, <span class="co">-- captures ordering within a session</span></a>
<a class="sourceLine" id="cb14-6" data-line-number="6">  analysis_type text,</a></code></pre></div>
<p>If <code>session_index</code> is not set, <code>analysis_type</code> allows the unique identification of a record within the session</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb15-1" data-line-number="1"></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">  <span class="dt">date</span> timestamptz,</a>
<a class="sourceLine" id="cb15-3" data-line-number="3">  material text <span class="kw">REFERENCES</span> vocabulary.material(<span class="kw">id</span>),</a></code></pre></div>
<p>Not really sure that material is the best parameterization of this concept…</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb16-1" data-line-number="1"></a>
<a class="sourceLine" id="cb16-2" data-line-number="2">  is_standard <span class="dt">boolean</span>,</a></code></pre></div>
<p>Some analytical results can be interpreted from other data, so we should explicitly state that this is the case.</p>
<h4 id="examples-2">Examples:</h4>
<ul>
<li>a detrital zircon age spectrum (the <code>datum</code> table would contain individual probability values at each age)</li>
<li>a multi-zircon igneous age (the <code>datum</code> table would include jointly-fitted age determinations for each relevant system)</li>
<li>a calculated plateau age for a stepped-heating Ar-Ar experiment.</li>
</ul>
<div class="sourceCode" id="cb17"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb17-1" data-line-number="1"></a>
<a class="sourceLine" id="cb17-2" data-line-number="2">  is_interpreted <span class="dt">boolean</span>,</a>
<a class="sourceLine" id="cb17-3" data-line-number="3">  <span class="kw">UNIQUE</span> (session_id, session_index, analysis_type)</a>
<a class="sourceLine" id="cb17-4" data-line-number="4">);</a>
<a class="sourceLine" id="cb17-5" data-line-number="5"></a>
<a class="sourceLine" id="cb17-6" data-line-number="6"><span class="kw">CREATE</span> <span class="kw">TABLE</span> datum (</a>
<a class="sourceLine" id="cb17-7" data-line-number="7">  <span class="kw">id</span> serial <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</a>
<a class="sourceLine" id="cb17-8" data-line-number="8">  analysis <span class="dt">integer</span> <span class="kw">REFERENCES</span> analysis(<span class="kw">id</span>),</a>
<a class="sourceLine" id="cb17-9" data-line-number="9">  <span class="kw">type</span> <span class="dt">integer</span> <span class="kw">REFERENCES</span> datum_type(<span class="kw">id</span>),</a>
<a class="sourceLine" id="cb17-10" data-line-number="10">  <span class="fu">value</span> <span class="dt">numeric</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</a>
<a class="sourceLine" id="cb17-11" data-line-number="11">  error <span class="dt">numeric</span>,</a>
<a class="sourceLine" id="cb17-12" data-line-number="12">  is_bad <span class="dt">boolean</span>,</a></code></pre></div>
<p>If set, this means that this is an “accepted” value among several related measurements.</p>
<h4 id="examples-3">Examples:</h4>
<ul>
<li>Accepted system for U-Pb single-zircon age</li>
</ul>
<div class="sourceCode" id="cb18"><pre class="sourceCode sql"><code class="sourceCode sql"><a class="sourceLine" id="cb18-1" data-line-number="1"></a>
<a class="sourceLine" id="cb18-2" data-line-number="2">  is_accepted <span class="dt">boolean</span>,</a>
<a class="sourceLine" id="cb18-3" data-line-number="3">  <span class="kw">UNIQUE</span> (analysis, <span class="kw">type</span>)</a>
<a class="sourceLine" id="cb18-4" data-line-number="4">);</a></code></pre></div>
